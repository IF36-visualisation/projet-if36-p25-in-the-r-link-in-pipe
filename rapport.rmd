---
title: "Rapport d'exploration - Temps de jeu"
author: "In the R - Link In Pipe"
date: "2025-06-11"
always_allow_html: true
output:
  prettydoc::html_pretty:
    theme: cayman        # autres choix : architect, tactile, leonids
    toc: true            # table des matières 
  pdf_document: default
---
```{r mise_en_place, include=FALSE}
#Ignorer la ligne
knitr::opts_chunk$set(echo = FALSE)

# Chargement des bibliothèques
library(dplyr)
library(tidyr)
library(ggplot2)
library(stringr)
library(treemapify)

# Chargement des fichiers (chemins locaux)
steam <- read.csv("./data/steam.csv", stringsAsFactors = FALSE)
hltb <- read.csv("./data/hltb_clean.csv", stringsAsFactors = FALSE)
opencritic <- read.csv("./data/opencritic_rankings_feb_2023.csv", stringsAsFactors = FALSE)

# Fonction robuste de conversion "23h 17m" -> heures décimales
convert_to_hours <- function(time_str) {
  time_str[time_str == "" | time_str == "N/A" | is.na(time_str)] <- NA
  h <- as.numeric(str_extract(time_str, "\\d+(?=h)"))
  m <- as.numeric(str_extract(time_str, "\\d+(?=m)"))
  h[is.na(h)] <- 0
  m[is.na(m)] <- 0
  result <- ifelse(is.na(time_str), NA, h + m / 60)
  return(result)
}

# Conversion des colonnes
hltb$main_story <- convert_to_hours(hltb$main_story)
hltb$extras <- convert_to_hours(hltb$extras)
hltb$completionist <- convert_to_hours(hltb$completionist)

# ---- filtre ASCII anti-LaTeX -------------------------------------------------
is_ascii <- function(x) !grepl("[^\\x00-\\x7F]", x)
steam_clean_ascii    <- steam %>% filter(is_ascii(name))
if ("Name" %in% names(hltb)) hltb_clean_ascii <- hltb %>% filter(is_ascii(Name))
# ------------------------------------------------------------------------------

```

---

# Introduction

Les jeux vidéo constituent aujourd’hui un objet d’étude de premier plan : ils mobilisent des enjeux économiques supérieurs à ceux du cinéma et de la musique, nourrissent une industrie technologique de pointe et s’inscrivent au cœur de problématiques d’ingénierie (grandes volumétries de données, optimisation d’algorithmes de recommandation, architecture distribuée des plateformes, etc.).
Dans ce contexte, notre travail vise à caractériser et modéliser la durée de complétion des jeux à partir de trois sources complémentaires :

HowLongToBeat — Video Games Playtime (données déclaratives des joueurs, 2023) ;

OpenCritic Ratings (agrégation de la presse spécialisée, fév. 2023) ;

Steam Store Games (télémétrie de jeu, prix et popularité, 2019).

En confrontant temps déclarés, temps réellement passés, évaluations utilisateur et critiques professionnelles, nous cherchons à identifier les déterminants – techniques, ludiques ou économiques – qui orientent la durée d’engagement d’un joueur sur un titre donné.

---

# Le genre d’un jeu influence-t-il sa durée de complétion ?

## Hypothèse

Nous supposons que le genre d’un jeu vidéo influence fortement sa durée de complétion. Par exemple, les jeux de rôle ou d’aventure demanderaient plus d’heures pour être terminés, notamment en mode "completionist", tandis que les jeux de course ou de plateforme seraient plus courts.

## Graphique

```{r genre_duree_completion, message=FALSE, warning=FALSE}

# Extraction du genre principal (1er genre listé)
hltb_first_genre <- hltb
hltb_first_genre$Primary_Genre <- sapply(strsplit(hltb_first_genre$Genres, ","), function(x) trimws(x[1]))

# Sélection de 5 genres populaires
genres_to_keep <- c("Shooter", "Adventure", "Role-Playing", "Platformer", "Racing")
hltb_filtered <- hltb_first_genre %>%
  filter(Primary_Genre %in% genres_to_keep)

# Mise au format long
hltb_long <- hltb_filtered %>%
  select(Primary_Genre, main_story, extras, completionist) %>%
  pivot_longer(cols = c(main_story, extras, completionist),
               names_to = "Mode", values_to = "Temps_heures")

# Calcul des moyennes
hltb_summary <- hltb_long %>%
  filter(!is.na(Temps_heures)) %>%
  group_by(Primary_Genre, Mode) %>%
  summarise(Temps_moyen = mean(Temps_heures), .groups = "drop")


# Barplot final
ggplot(hltb_summary, aes(x = Primary_Genre, y = Temps_moyen, fill = Mode)) +
  geom_bar(stat = "identity", position = "dodge") +
  labs(title = "Temps de jeu moyen par genre et par mode",
       x = "Genre principal",
       y = "Temps de jeu moyen (heures)",
       fill = "Mode de jeu") +
  scale_fill_brewer(palette = "Set2") +
  theme_minimal() +
  theme(plot.title = element_text(hjust = 0.5, size = 16),
        axis.text.x = element_text(angle = 45, hjust = 1))
```

---

## Interprétation

Ce graphique permet de comparer le **temps de jeu moyen par genre** selon trois modes de complétion : `main_story`, `extras` et `completionist`.

- Les **jeux de rôle (Role-Playing)** sont clairement les plus longs, notamment en mode *completionist* où la moyenne dépasse 75h.
- Les **jeux de course** ont aussi une durée moyenne importante en mode completionist, bien plus que ce que l’on aurait pu anticiper.
Cela peut s'expliquer par le fait que les jeux de courses contiennent des saisons avec un certain nombre de courses à effectuer (entre 15 et 30). L'echec d'une seule course par saison suffit pour ne pas pouvoir terminer le jeu à 100% et prends donc beaucoup plus de temps de manière générale.
- À l’inverse, les **shooters** et **platformers** sont globalement plus courts, rarement au-dessus de 10-15h même en mode étendu.
Cela semble logique car les joueurs de shooters s'interessent plus à des modes compétitifs et les plateformeurs sont de manière générale plus courts et faciles a terminer que des jeux de rôle ou d'aventure.
- 
Ces résultats confirment que le genre du jeu est un bon prédicteur de sa durée. Il serait intéressant d’approfondir cette analyse en croisant la durée avec d’autres variables comme le prix pour voir par exemple si des jeux plus chèrs sont plus complets et par conséquent, plus long à terminer.

---

# Dans quelle mesure la proportion d'avis positifs par rapport aux avis négatifs des jeux vidéos influence-t-elle le temps passé sur ces jeux ?

## Hypothèse

Pour répondre à cette question, nous cherchons à réaliser un histogramme comparant les avis des joueurs au temps de jeu moyen et médian passé sur les jeux.


## Graphique

```{r avis_temps_jeu, message=FALSE, warning=FALSE, fig.width=12, fig.height=7}
ratings_playtime <- steam %>% filter(average_playtime != 0) %>% mutate(
  average_playtime_hours = round(average_playtime / 60, 2),
  median_playtime_hours = round(median_playtime / 60, 2),
  percent_positive_ratings = round(100 * positive_ratings / (positive_ratings + negative_ratings))
) %>% select(percent_positive_ratings,
             average_playtime_hours,
             median_playtime_hours)

ratings_summary <- ratings_playtime %>%
  mutate(
    rating_bucket = cut(
      percent_positive_ratings,
      breaks = c(0, 25, 50, 75, 100),
      labels = c("0-25%", "25-50%", "50-75%", "75-100%"),
      include.lowest = TRUE
    )
  ) %>%
  group_by(rating_bucket) %>%
  summarise(
    average_playtime = mean(average_playtime_hours, na.rm = TRUE),
    median_playtime = median(median_playtime_hours, na.rm = TRUE)
  )

ggplot(ratings_summary, aes(x = rating_bucket)) +
  geom_col(aes(y = average_playtime, fill = "Moyenne"), width = 0.6) +
  geom_col(aes(y = median_playtime, fill = "Médiane"), width = 0.3) +
  geom_text(
    aes(y = average_playtime, label = round(average_playtime, 1)),
    vjust = -0.5,
    size = 4,
    color = "#ff8b00",
    fontface = "bold"
  ) +
  geom_text(
    aes(y = median_playtime, label = round(median_playtime, 1)),
    vjust = -0.5,
    size = 4,
    color = "#9fcaff",
    fontface = "bold"
  ) +
  scale_fill_manual(values = c("Moyenne" = "#0074ff", "Médiane" = "#ff8b00"),
                    name = "") +
  labs(
    title = "Comparaison du temps de jeu moyen et médian par tranche d'avis positifs",
    subtitle = "Source : Steam (jeux avec temps de jeu non nul)",
    x = "Pourcentage d'avis positifs",
    y = "Temps de jeu (heures)"
  ) +
  theme(
    plot.title = element_text(
      hjust = 0.5,
      size = 18,
      face = "bold",
      color = "black"
    ),
    plot.subtitle = element_text(
      hjust = 0.5,
      size = 12,
      color = "black"
    ),
    axis.title = element_text(size = 14, color = "black"),
    axis.text = element_text(size = 12, color = "black"),
    panel.grid.major = element_line(color = "grey90"),
    panel.grid.minor = element_blank()
  )
```

## Interprétation

D'après le temps de jeu moyen, plus les avis sont positifs plus les jeux sont joués. Néanmoins, d'après le temps jeu médian, les avis, qu'ils soient très positifs ou très négatifs ou dans l'entre-deux, n'influencent pas le temps passé sur les jeux. Donc, très peu de joueurs se fient aux avis Steam ou ils préfèrent jouer quelques heures avant d'aller lire les avis. Les avis Steam ne sont peut-être pas aussi pertinents que ceux rédigés par la presse et les magazines spécialisés.

---

# Il y a t il une corrélation entre le temps de jeu et son genre ?

## Hypothèse

Pour cette analyse, nous avons voulu identifier quels étaient les jeux présentant les **temps de jeu moyens les plus élevés** sur Steam et **les genres associés**.  
**Notre hypothèse** est que certains types de jeux, comme les **jeux de simulation** ou les **multijoueurs**, pourraient inciter à des sessions de jeu beaucoup plus longues que d’autres genres plus rapides ou épisodiques.

## Premier graphique

```{r temps_jeu_genre, message=FALSE, warning=FALSE}

# Nettoyer les genres : extraire le premier genre
steam_premier_genre <- steam %>%
  filter(!is.na(genres), average_playtime > 0) %>%
  mutate(
    genre_main = str_split(genres, ";", simplify = TRUE)[,1],
    average_playtime_hours = average_playtime / 60
  )

# Calculer la moyenne du temps de jeu par genre
genre_summary <- steam_premier_genre %>%
  group_by(genre_main) %>%
  summarise(mean_playtime = mean(average_playtime_hours, na.rm = TRUE)) %>%
  arrange(desc(mean_playtime))

# Afficher le graphique
ggplot(genre_summary, aes(x = reorder(genre_main, mean_playtime), y = mean_playtime, fill = genre_main)) +
  geom_col(show.legend = FALSE) +
  coord_flip() +
  labs(
    title = "Temps moyen de jeu par genre",
    x = "Genre",
    y = "Temps moyen (heures)"
  ) +
  theme_minimal()
```

## Interprétation

Le graphique **valide notre hypothèse**, montrant clairement que les jeux de type **"Massively Multiplayer"** (MMORPG) et **"Free to Play"** enregistrent les temps de jeu moyens les plus élevés. Cela peut s’expliquer par leur fonctionnement : les MMORPG sont conçus pour retenir les joueurs sur le long terme grâce à des systèmes d’évolution progressive, de missions quotidiennes, d’interactions sociales et d'abonnement. Les jeux Free to Play, souvent multijoueurs eux aussi, encouragent également une forte rétention pour maximiser leur modèle économique basé sur les microtransactions.

À l'inverse, des genres comme **"Casual"**, **"Photo Editing"**, **"Nudity"** ou encore **"Gore"** affichent des temps moyens bien plus courts. Ces catégories correspondent souvent à des expériences plus brèves, peut être de par leur contenu limité, ou parce que leur public recherche des sessions de jeu rapides.

Cependant, avec cette visualisation il est assez difficile d'en tirer une analyse complète. Nous avons donc réalisé une **seconde analyse** plus précise, centrée sur les **15 jeux les plus joués**. Cela permet d'illustrer concrètement quels jeux dominent vraiment en termes de durée, et de voir si certains genre sortent alors du lot.

## Deuxième graphique

```{r plus_joues_genre, message=FALSE, warning=FALSE}

# Nettoyage : extraire le premier genre
steam_clean_simple <- steam %>%
  filter(!is.na(average_playtime), average_playtime > 0, genres != "") %>%
  mutate(
    average_playtime_hours = average_playtime / 60,
    genre_main = str_split(genres, ";") |> sapply(\(x) str_trim(x[1]))
  )

# Sélection des 15 jeux les plus joués
top_jeux_simple <- steam_clean_simple %>%
  arrange(desc(average_playtime_hours)) %>%
  slice_head(n = 15)

# Nouveau graphique
ggplot(top_jeux_simple, aes(x = reorder(name, average_playtime_hours), y = average_playtime_hours, fill = genre_main)) +
  geom_col() +
  coord_flip() +
  labs(
    title = "Les 15 jeux les plus joués sur Steam par genre principal",
    x = "Jeu",
    y = "Temps moyen de jeu (en heures)",
    fill = "Genre principal"
  ) +
  theme_minimal() +
  theme(legend.position = "bottom", legend.text = element_text(size = 8))
```

## Interprétation

Le graphique obtenu montre que :

- Certains jeux avec un genre **Adventure** ou **Free to Play** apparaissent comme ayant des **temps de jeu moyens particulièrement élevés**.
- Parmis les 5 premiers, **3** font partie du genre **Adventure**.
- Les **jeux de genre indépendants (Indie)** orientés du même type figurent parmi les titres les plus joués en termes de durée.
- Cela **confirme partiellement notre hypothèse** : les genres favorisant **l'exploration** ou **l'investissement dans un personnage** tendent à engendrer des sessions de jeu beaucoup plus longues. **Cependant** nous sommes plutôt surpris de ne pas voir plus de jeux **Multijoueurs** en haut du classement, comme le montrait le premier graphique, qui ont notament une durée de vie quasi **illimité**. 

Nous pouvons formuler l’hypothèse suivante : si le genre "Massively Multiplayer" apparaît très largement en tête dans le graphique 1 (temps moyen par genre), c’est parce que les jeux multijoueurs en ligne sont conçus pour encourager un investissement très long dans la durée (progression continue, événements récurrents, interactions sociales), mais ils restent peu nombreux en nombre de titres comparé aux jeux d'aventure ou free-to-play. Ainsi, dans le graphique 2, les jeux d'aventure et free-to-play dominent car ils sont beaucoup plus représentés dans le catalogue global et certains titres très populaires tirent leur genre vers le haut en termes de temps joué.

## Remarque

Il est important de préciser que ce dataset date de **2019**.
Depuis, les jeux les plus joués sur Steam ont largement évolué, d'après Steam [Classement actuel des jeux les plus joués sur Steam (SteamDB)](https://steamdb.info/charts/) : des titres comme Counter-Strike 2, Dota 2 ou encore PUBG dominent aujourd'hui les classements. Les tendances actuelles sont donc significativement différentes de celles observées dans cette visualisation.

---

# Il y a t il une relation entre le prix d'un jeu, sa note et le nombre de personnes qui le possèdent ?

## Hypothèse

Nous avons voulu déterminer si le **prix** d’un jeu et **l’avis donné par les joueurs** avaient une influence sur le **nombre de personnes qui achètent le jeu**, mais aussi si il y avait une corrélation entre le **prix** et **l’avis des joueurs**.
Nous pensons que les jeux les **moins chers** et les **mieux notés** sont ceux qui sont les plus achetés. 

## Premier graphique 
```{r prix_note_possesseurs, message=FALSE, warning=FALSE}

# On ne garde que les variables dont on a besoin (avis, note, nombre de possesseurs)
steam_ratings_price_owners <- steam %>%
  select(positive_ratings, negative_ratings, price, owners)

# On calcule la médiane du nombre de possesseurs, en milliers
steam_ratings_price_owners <- steam_ratings_price_owners %>%
  separate(owners,c('min_owners','max_owners'),'-') %>%
  mutate(max_owners = as.numeric(max_owners) / 1000, min_owners = as.numeric(min_owners) / 1000) %>%
  mutate(owners = ((max_owners - min_owners) / 2 ) + min_owners)

# On supprime les lignes où il y a trop de possesseurs ou un prix trop élévé
# pour éviter que quelques outliers ne rendent le graphique illisible car trop petit 
# On supprime aussi les lignes où il y a trop peu d'avis car elles peuvent fausser les données
steam_ratings_price_owners <- steam_ratings_price_owners %>%
  filter(positive_ratings+negative_ratings>5, owners < 1000, price < 100)

# On calcule le pourcentage de votes positifs
steam_ratings_price_owners <- steam_ratings_price_owners %>%
  mutate(ratings = ((positive_ratings / (positive_ratings + negative_ratings)) * 100))

# On met les lignes avec le plus de possesseurs sur le dessus du graphique
# Elles sont moins nombreuses donc cela permet de mieux les voir 
steam_ratings_price_owners <- steam_ratings_price_owners %>%
  arrange(owners)

# On crée un graphique en nuage de points
graphe <- ggplot(steam_ratings_price_owners,
                 aes(x = price,
                     y = ratings,
                     color = owners)) +
  geom_point()

# On inverse les couleurs du dégradé, onveut qu'un nombre plus élevé = une couleur plus sombre
graphe <- graphe + scale_colour_gradient(low = "#56B1F7", high = "#132B43")

# On ajoute un titre et on change les labels
graphe <- graphe + labs(colour = "Médiane du nombre\nestimé de possesseurs,\nen milliers",
                        y = "Pourcentage de votes positifs",
                        x = "Prix en dollars américains",
                        title = "Estimation du nombre de possesseurs d'un jeu\nen fonction du prix et du nombre de votes positifs")

# On affiche le graphique
graphe

```

## Interprétation

Le graphique obtenu montre que :

- Les jeux **les moins chers** et **les mieux notés** sont **les plus possédés**.
- Les jeux n'ayant **que des notes positives** sont dans **les moins possédés**, mais le reste du temps, **plus un jeu a de votes positifs plus que négatifs**, **plus il est possédé**. 
- Les jeux **les plus possédés** sont des jeux **gratuits**.
- Plus un jeu est **cher**, plus il a un **pourcentage d'avis élevé**.
- Une majorité des jeux ont un **prix en dessous de 50 dollars**, et même **en dessous de 25 dollars**.
- On remarque que **les prix finissant par 5 ou 0** sont **plus communs** que les autres, notamment **à partir de 30 dollars**. 

Cela **confirme partiellement** notre hypothèse : on voit que **moins un jeu est cher** et **plus il a un pourcentage élevé d'avis positifs**, **plus il aura de chances d'être possédé**. On voit aussi apparaître une **corrélation entre note et prix**. 

Nous pouvons donc partir du principe que lorsqu'un jeu est peu cher, et surtout lorsqu'il est gratuit, les utilisateurs vont plus l'acheter. De plus, les utilisateurs auront plus tendance à acheter un jeu s'il est bien noté. Nous pouvons supposer que c'est dû aux faits suivants :
- Les utilisateurs auront **plus confiance** en un jeu avec de **bons avis**. 
- **Moins un jeu est cher**, moins il leur semble **risqué de l'acheter**, même s'il a de mauvais avis.
- Les jeux **les mieux notés** sont **plus mis en avant** par la plateforme Steam. Un utilisateur a plus de chance d'entrer en contact avec des jeux bien notés, et donc de les acheter.

Cependant, les jeux n'ayant **que des notes positives** sont **moins possédés**. Il est très probable que ces deux faits soient corrélés : si un jeu n'a **aucun avis négatif**, c'est souvent un signe que **peu de personnes l'ont acheté**. À partir d'un certains nombre d'achats et donc de votes, il y a généralement **au moins une personne qui n'a pas apprécié** le jeu. Il est donc possible que, **parce que ces jeux ne sont pas très possédés**, ils n'ont **pas encore reçu d'avis négatif**.

Il serait toutefois intéressant de savoir **comment** est déterminée **l'estimation du nombre de possesseurs**. Il est en effet possible que les **relations de causalité** que nous avons remarquées soient **inversées** si cette estimation est **basée sur le prix du jeu et les avis qu'il a reçus**.

Par ailleurs, on peut supposer que les utilisateurs qui achètent un jeu **plus cher** ont plus réfléchi à cet achat, qu'ils sont **moins suceptibles d'être déçus**, et que c'est pour cela qu'ils ont un **avis positif** sur le jeu.

Nous avons ensuite réalisé une heatmap des corrélations multivariées, qui permet de quantifier la corrélation entre les différentes features du dataset, comme le prix, les avis ou la popularité. Nous allons nous servir d'une matrice de correlation pour notre analyse.

## Deuxième graphique

```{r prix_note_possesseurs_heatmap, message=FALSE, warning=FALSE}

steam_num <- steam %>%
  # médiane des propriétaires (en milliers)
  separate(owners, c("min_owners","max_owners"), "-", convert = TRUE) %>%
  mutate(popularite = (min_owners + max_owners)/2 / 1000,
         average_playtime_h = average_playtime / 60,
         
         achievements = achievements,                # déjà numérique dans le csv
         required_age = as.numeric(required_age),
         price = price) %>%
  # variables retenues
  select(average_playtime_h, popularite, positive_ratings, price) %>%
  drop_na()

# --- Matrice de corrélation ---------------------------------------------------
mat_corr  <- cor(steam_num, use = "pairwise.complete.obs")

corr_long <- as.data.frame(as.table(mat_corr)) |>
  rename(Var1 = Var1, Var2 = Var2, Corr = Freq)

# --- Heat-map -----------------------------------------------------------------
ggplot(corr_long, aes(Var1, Var2, fill = Corr)) +
  geom_tile(color = "grey90") +
  geom_text(aes(label = sprintf("%.2f", Corr)), colour = "black", size = 3) +
  scale_fill_gradient2(
    low  = "#ff4500",
    mid  = "#e0f3ff",   # bleu très pâle pour ~0
    high = "#0074ff",
    limits = c(-1, 1),
    midpoint = 0,
    name = "r"
  ) +
  labs(title = "Matrice de corrélation – variables clés (Steam)",
       x = "", y = "") +
  theme_minimal() +
  theme(axis.text.x = element_text(angle = 45, hjust = 1),
        plot.title  = element_text(hjust = .5, face = "bold"))

```

## Interprétation

La corrélation très forte ( r ≈ 0,76 ) entre popularité (nombre de possesseurs) et positive_ratings confirme qu’un jeu largement diffusé reçoit mécaniquement davantage d’avis positifs ; on retrouve ici l’effet « plus on est joué, plus on est noté ».

En revanche, le temps moyen de jeu (average_playtime_h) n’est pratiquement pas corrélé à la popularité ( r ≈ 0,11 ) ni aux évaluations ( r ≈ 0,09 ) : un titre peut donc être massivement possédé et plébiscité sans pour autant retenir longtemps ses joueurs, ce qui nuance l’idée qu’un bon accueil garantirait un engagement durable.

Le prix montre seulement une corrélation faible et positive avec les évaluations ( r ≈ 0,23 ) : les jeux plus chers sont légèrement mieux notés, possiblement parce qu’il s’agit de productions premium mieux finies ; toutefois, le lien prix ↔ popularité reste ténu ( r ≈ 0,10 ), suggérant que le tarif n’entrave pas significativement la diffusion lorsqu’un titre dispose d’un bouche-à-oreille favorable.

Enfin, la quasi-absence de rapport entre prix et temps de jeu ( r ≈ -0,03 ) indique que payer plus cher n’offre pas nécessairement une expérience plus longue, ce qui rejoint les modèles contemporains où la valeur perçue repose autant sur la qualité que sur la durée.

---

# Y a-t-il un lien entre le nombre de possesseurs des jeux et le temps passé sur les jeux ?

## Graphique

```{r possesseurs_temps_jeu, message=FALSE, warning=FALSE}
# On ne prend pas en compte les jeux gratuits
# On convertit l'intervalle de possesseurs en valeur numérique moyenne
# On convertit le temps de jeu en heures
steam_filtered <- steam %>%
  filter(price > 0) %>%
  mutate(
    owners_min = as.numeric(sub("-.*", "", owners)),
    owners_max = as.numeric(sub(".*-", "", owners)),
    owners_mean = (owners_min + owners_max) / 2,
    average_playtime_hours = average_playtime / 60
  )

# Sélection des 20 jeux payants les plus possédés
top_games <- steam_filtered %>%
  arrange(desc(owners_mean)) %>%
  slice_head(n = 20)
```
```{r}
ggplot(top_games,
       aes(area = owners_mean, fill = average_playtime_hours, label = name)) +
  geom_treemap() +
  geom_treemap_text(
    colour = "white",
    place = "center",
    grow = TRUE,
    reflow = TRUE
  ) +
  scale_fill_gradient(low = "lightblue",
                      high = "darkblue",
                      name = "Temps de jeu moyen (heures)") +
  labs(title = "Les 20 jeux Steam les plus vendus",
       subtitle = "possession vs. temps de jeu moyen",
       caption = "Source : steam.csv") +
  theme_minimal()
```

## Interprétation

On remarque que PUBG (PlayerUnknown's Battlegrounds) est le jeu payant Steam le plus possédé qui est le plus joué. Mais il reste presque le seul jeu payant Steam très vendu à être très joué. En effet, d'après le graphique, plusieurs jeux sont énormément possédés, comme Portal, Portal 2 et Half Life, et très peu joués voire pas du tout lancés. Cela peut s'expliquer par l'offre groupée des jeux Valve qui est vendue très peu cher en période de soldes. Il y a également des jeux comme Payday 2 et Skyrim qui font partie de la bibliothèque de beaucoup de joueurs mais qui ne sont pas tant joués que ça. Cela peut aussi s'expliquer par le phénomène des soldes. Durant les soldes, Steam propose des jeux populaires et présents sur la plateforme depuis très longtemps à des prix très bas. Donc, une certaine partie des joueurs achètent des jeux de manière compulsive afin d'ajouter les jeux à leur bibliothèque se persuadant qu'ils vont y jouer un jour. En réalité, ce graphique montre qu'une grande partie des joueurs n'essayera même pas d'y jouer une seule fois.


## Question : Les temps de complétion varient-ils selon la plateforme ?

### Hypothèse

Certains jeux pourraient être plus longs sur **Windows** que sur **Mac** ou **Linux**, en raison d’une **optimisation différente**, d’un **public distinct** ou d’un **catalogue partiel**. Nous faisons l’hypothèse que les jeux disponibles sur Windows sont en moyenne plus longs à jouer, car c’est la plateforme la plus courante, avec le catalogue le plus complet.

### Graphique 1

```{r plateform_des_jeux, message=FALSE, warning=FALSE}
library(dplyr)
library(ggplot2)
library(stringr)
library(tidyr)

# Nettoyage de base
steam <- steam %>%
  filter(average_playtime > 0) %>% # on garde les jeux joués
  mutate(
    average_playtime_hours = average_playtime / 60,
    windows = str_detect(platforms, "windows"),
    mac     = str_detect(platforms, "mac"),
    linux   = str_detect(platforms, "linux")
  )

# Création du dataset long : une ligne par plateforme présente
steam_long <- steam %>%
  select(name, average_playtime_hours, windows, mac, linux) %>%
  pivot_longer(cols = c(windows, mac, linux),
               names_to = "platform",
               values_to = "available") %>%
  filter(available == TRUE)

# Résumé par plateforme
platform_summary <- steam_long %>%
  group_by(platform) %>%
  summarise(
    n_jeux = n(),
    moyenne_heures = mean(average_playtime_hours),
    mediane_heures = median(average_playtime_hours)
  )

# Affichage du graphique
ggplot(steam_long, aes(x = platform, y = average_playtime_hours, fill = platform)) +
  geom_boxplot(outlier.alpha = 0.2) +
  scale_y_continuous(trans = "sqrt") +
  labs(
    title = "Temps de jeu moyen par plateforme (jeux Steam)",
    x = "Plateforme",
    y = "Temps moyen (heures)",
    fill = "Plateforme"
  ) +
  theme_minimal()
```

### Remarque

Le graphique est assez pertinent pour voir les **extremums**, mais complique la lecture pour les boîtes en elles-mêmes. En effet, le **temps de jeu moyen** pour la majorité des jeux est relativement faible (souvent au alentour de **20h**). Mais certains jeux (typiquement les **MMO ou jeux multijoueurs**) atteignent des temps de jeu particulièrement élevé (plusieurs **milliers d’heures**). De ce fait, l’échelle de l’**axe Y s’étire** énormément, rendant les boxplots écrasés vers le bas.

Étant donné que ces extremum sont très semblables, j'ai décidé de refaire un graphique en adaptant l'axe Y (limité à 100h) pour plus de visibilité :

### Graphique 1.2

```{r plateform_des_jeux2, message=FALSE, warning=FALSE}
ggplot(steam_long, aes(x = platform, y = average_playtime_hours, fill = platform)) +
  geom_boxplot(outlier.alpha = 0.2) +
  coord_cartesian(ylim = c(0, 100)) +
  labs(
    title = "Temps de jeu par plateforme (jeux Steam)",
    subtitle = "Distribution des temps de jeu moyens (limités à 100h)",
    x = "Plateforme",
    y = "Temps moyen (heures)",
    fill = "Plateforme"
  ) +
  theme_minimal()
```

### Interprétation des résultats 

Cette nouvelle version du graphique permet d'y voir un peu plus clair sur les différences de temps de jeu moyen selon les plateformes supportées par les jeux Steam :

- **Windows** semble être la plate-forme la plus courante, elle affiche la plus grande variabilité de temps de jeu ;
- **Mac** montre des temps de jeu en moyenne plus élevés que Linux ;

Ces variations peuvent s'expliquer de différentes manières. Cependant, la lisibilité de ce graphique me semblant encore assez complexe, j'ai décidé de l'adapter pour essayer d'y voir un peu plus clair d'abord, notamment en prenant une **échelle logarithmique**, et un autre type de graphique : le **Violon plot**.


### Graphique 2

```{r plateform_des_jeux3, message=FALSE, warning=FALSE}
ggplot(steam_long, aes(x = platform, y = average_playtime_hours, fill = platform)) +
  geom_violin(trim = FALSE, alpha = 0.6) +
  scale_y_log10() +
  labs(title = "Distribution des temps de jeu moyens par plateforme (violin plot)",
       y = "Temps de jeu (heures, log)", x = "Plateforme") +
  theme_minimal()
```

### Interprétation des résultats 

Sur cette forme de graphique, nous avons plusieurs choses :
- En premier, **l'échelle** : c'est une échelle logarithmique, cela signifie qu’au lieu d’avoir un axe linéaire (1, 2, 3, ...), on a ici une échelle de puissance de 10 :
    - 1e-01 → 0,1 heure (≈ 6 minutes)
    - 1e+00 → 1 heure
    - 1e+01 → 10 heures
    - 1e+02 → 100 heures
    - 1e+03 → 1000 heures (= plus de 40 jours) 

L'**avantage** de cette échelle est qu'elle **compresse visuellement les valeurs extrêmes** et **rend plus lisibles les tendances générales**, même en présence de très gros outliers.

- En deuxième, la **largeur** du violon : elle indique à chaque hauteur la **densité de jeux** à ce niveau de durée. Ainsi : 
    - Si le violon est large vers 1e+01, cela signifie que de nombreux jeux ont une durée moyenne autour de 10h.
    - Si le violon est étroit à un endroit, il y a peu de jeux avec ce temps de jeu moyen.
    
Maintenant, revenons à nos **résultats** :
- Sur les **3 plateformes**, la majorité des jeux ont un **temps moyen compris entre 1h et 10h** (zone la plus large, centrée vers 1e+00 à 1e+01).
- **Quelques jeux dépassent** les 100h voire 1000h, mais ils sont très rares : c’est la partie très fine et étirée du haut du violon.
- Les **distributions sont globalement similaires** entre les 3 plateformes :
    - **Windows** a une base légèrement plus étalée vers le bas, ce qui suggère qu’il y a un peu plus de jeux avec très peu de temps de jeu moyen.
    - **Linux** et **Mac** semblent un peu plus concentrés autour d’un cœur de distribution (≈ 5-10h).

(EN COURS)
